function change(a){now=new Date,end=0,progress=0,order=0,today=fixDigit(now.getMonth()+1)+"-"+fixDigit(now.getDate()),type=a,output("type",type),eleMain.style.filter="blur(.5em)",setTimeout(function(){eleMain.style.filter="blur(0)",updateTime()},500)}function relStyle(a,b,c,d,e){propVal=1*eleMain.style[a].replace(c,"")+b,propVal=Math.max(propVal,d),propVal=Math.min(propVal,e),eleMain.style[a]=propVal+c,output(a,Math.round(100*propVal)/100)}function fullscreen(){document.fullscreenElement?(document.exitFullscreen(),output("fullscreen","全屏")):(document.documentElement.requestFullscreen(),output("fullscreen","退出"))}function $(a,b,c,d){now>=end&&(subject=a,start=new Date("2021-"+b+":00+08:00"),end=new Date("2021-"+c+":00+08:00")),subject==a&&d?subtitle=d:null}function fixDigit(a){return a=parseInt(a),10>a?"0"+a:a}function getClock(a){return a.getHours()+":"+fixDigit(a.getMinutes())}function output(a,b){document.getElementById(a).innerHTML=b}function updateSubtitle(){order<subtitle.length-1?order++:order=0,output("subtitle",subtitle[order])}function setTemp(a,b,c,d){a=prompt("考试开始时间所在的小时",17),b=prompt("考试开始时间所在的分钟",0),c=prompt("考试结束时间所在的小时",18),d=prompt("考试结束时间所在的分钟",0),$(prompt("考试科目名称","临时"),today+"T"+fixDigit(a)+":"+fixDigit(b),today+"T"+fixDigit(c)+":"+fixDigit(d)),alert("考试科目："+subject+"\n起止时间："+getClock(start)+"~"+getClock(end))}function illback(){18==now.getHours()&&now.getMinutes()>30?subtitle=4==now.getDate()?["今天我就要离开，明天我还会回来。9min！"]:["祝各位努力的孩子取得理想的名次！"]:null}function updateExam(){switch($("","01-01T00:00","01-01T00:00",["考试时钟预设内容"]),type){case"高三理科":subtitle=["高三理科月考一：请以实际铃声为准。"],$("语文","09-25T14:25","09-25T16:55");break;case"高三文科":subtitle=["高三文科月考一：请以实际铃声为准。"],$("语文","09-25T14:25","09-25T16:55");break;case"高二理科":subtitle=["高二理科阶段性考试一：请以实际铃声为准。"],$("物理","08-26T10:40","08-26T12:20"),$("数学","08-26T14:20","08-26T16:20"),$("化学","08-26T16:50","08-26T18:30"),$("语文","08-27T07:40","08-27T10:10"),$("生物","08-27T10:40","08-27T12:10"),$("英语","08-27T14:20","08-27T16:20");break;case"高二文科":subtitle=["高二文科阶段性考试一：请以实际铃声为准。"],$("历史","08-26T10:40","08-26T12:20"),$("数学","08-26T14:20","08-26T16:20"),$("地理","08-26T16:50","08-26T18:30"),$("语文","08-27T07:40","08-27T10:10"),$("政治","08-27T10:40","08-27T12:20"),$("英语","08-27T14:20","08-27T16:20");break;case"高一":subtitle=["高一暂未启用考试时钟。"],$("数学","06-28T14:20","06-28T16:00"),$("英语","06-28T16:30","06-28T18:10"),$("语文","06-29T07:50","06-29T09:50"),$("化学","06-29T10:20","06-29T12:00"),$("物理","06-29T14:20","06-29T16:00"),$("生物","06-29T16:30","06-29T18:00"),$("政史","06-30T07:50","06-30T09:50"),$("地理","06-30T10:20","06-30T11:20");break;case"高三日常":subtitle=" ",$("晨读1",today+"T07:10",today+"T07:25"),$("晨会",today+"T07:25",today+"T07:30"),$("晨读2",today+"T07:30",today+"T08:00"),$("午休",today+"T12:00",today+"T13:55"),$("考练",today+"T16:20",today+"T17:05"),$("晚训",today+"T18:25",today+"T18:45"),$("晚写",today+"T18:45",today+"T18:55"),$("晚一",today+"T18:55",today+"T19:40"),$("晚二",today+"T19:50",today+"T20:35"),$("晚三",today+"T20:50",today+"T22:00"),$("晚修",today+"T22:00",today+"T23:00");break;case"临时科目":subtitle=["欢迎使用考试时钟，如有问题可以加入QQ群894656456交流。"];break;default:subtitle=["不存在的考试类型，请重新选择。"]}duration=getClock(start)+"~"+getClock(end),start-18e5>now?(timer=Math.round((start-now)/36e4)/10,timersub="h",activity="考试加油",progress=0):start-12e5>now?(timer=Math.round((now-start+18e5)/6e4),timersub="/10min",activity="课间休息",progress=(now-start+18e5)/6e3):start-6e5>now?(timer=Math.round((now-start+12e5)/6e4),timersub="/10min",activity="入场扫描",progress=(now-start+12e5)/6e3):start-3e5>now?(timer=Math.round((now-start+6e5)/6e4),timersub="/5min",activity="发卡贴码",progress=(now-start+6e5)/3e3):start>now?(timer=Math.round((now-start+3e5)/6e4),timersub="/5min",activity="发卷审题",progress=(now-start+3e5)/3e3):end>now?(.5>(now-start)/(end-start)?(timer=Math.round((now-start)/6e4),activity="已经开始"):(timer=Math.round((end-now)/6e4),activity="距离结束"),timersub="min",progress=100*((now-start)/(end-start))):(subject="",duration="",timer="",timersub="考试结束",activity="",progress=100),document.getElementById("bar").style.width=progress+"%",output("subject",subject),output("duration",duration),output("timer",timer),output("timersub",timersub),output("activity",activity)}function updateSST(){eleSST=document.getElementById("SSTBubble"),SCREENSAVER_TIME-=1,0>SCREENSAVER_TIME?(eleSST.style.backgroundColor="rgba(255,255,255,.2)",output("SST","已经")):10>SCREENSAVER_TIME?(eleSST.style.display="flex",eleSST.style.backgroundColor="#f52",output("SST","在"+SCREENSAVER_TIME+"分钟后")):eleSST.style.display=""}onload=function(){console.warn("%c\n欢迎加入野生技协\nQQ群: 894656456\n","font:bold 3em Roboto,sans-serif;"),eleMain=document.getElementsByTagName("body")[0];try{location.href.match("//exam.thisis.host")?null:document.getElementById("VerifyBubble").style.display="block"}catch(a){alert("检测到盗版的考试时钟且发送警报失败！\n"+a),location.href="https://exam.thisis.host"}change("高三理科"),location.href.match("debug")?(alert("已进入调试模式，关闭本页面可返回正常模式。"),now=new Date("2021-09-18T15:00+08:00"),updateTime=function(){now>new Date("2021-09-20T19:00+08:00")?change(type):null,19==now.getHours()&&(now.setHours(31),today=fixDigit(now.getMonth()+1)+"-"+fixDigit(now.getDate())),now.setSeconds(now.getSeconds()+30),output("clock",getClock(now)),updateExam()},setInterval(updateTime,20)):(updateTime=function(){now=new Date,output("clock",getClock(now)),updateExam()},setInterval(updateTime,2e3)),updateTime(),updateSubtitle(),setInterval(updateSubtitle,2e3)};